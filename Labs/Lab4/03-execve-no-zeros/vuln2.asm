extern printf, strcpy, exit

section .data
fmstr: db "Here's your leek: %p",0xa,0
section .text
global main
main:
    push rbp
    mov rbp, rsp
    sub rsp, 64
    mov [rbp-8], rdi
    mov [rbp-16], rsi

    lea rbx, [rbp-64]         ; buf
    mov rsi, rbx
    mov rdi, fmstr
    call printf

    mov rdi, [rbp-8]
    cmp rdi, 2
    jne away

    mov rsi, [rbp-16]   ; argv
    mov rcx, [rsi+8]    ; argv[1] - source
    mov rsi, rcx

    mov rdi, rbx    ; destination
    call strcpy
    leave
    ret
away:
    mov rdi, 1
    call exit
